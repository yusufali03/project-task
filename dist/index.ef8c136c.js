const e="727dc9655ddaf6548fcba0d55b7b9eabb68e23b1";async function t(t){let a=await fetch(`https://api.pipedrive.com/v1/persons?api_token=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${t.firstName} ${t.lastName}`,phone:t.phone,email:t.email})}),o=await a.json();if(a.ok)return o.data.id;throw console.error("Error creating person:",o),Error("Could not create person")}async function a(t){let a=await fetch(`https://api.pipedrive.com/v1/organizations?api_token=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.address,address:t.address})}),o=await a.json();if(a.ok)return o.data.id;throw console.error("Error creating organization:",o),Error("Could not create organization")}const o=document.getElementById("jobForm");o.addEventListener("submit",async function(n){n.preventDefault();let r={title:`${document.getElementById("jobType").value} - ${document.getElementById("firstName").value} ${document.getElementById("lastName").value}`,firstName:document.getElementById("firstName").value,lastName:document.getElementById("lastName").value,phone:document.getElementById("phone").value,email:document.getElementById("email").value,address:document.getElementById("address").value,city:document.getElementById("city").value,state:document.getElementById("state").value,zipCode:document.getElementById("zipCode").value,area:document.getElementById("area").value,startDate:document.getElementById("startDate").value,startTime:document.getElementById("startTime").value,endTime:document.getElementById("endTime").value,jobDescription:document.getElementById("jobDescription").value,jobSource:document.getElementById("jobSource").value};try{let n=await t(r),i=await a(r),d=await fetch(`https://api.pipedrive.com/v1/deals?api_token=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r.title,person_id:n,org_id:i,visible_to:1,add_time:r.startDate+" "+r.startTime,custom_fields:{job_type:r.jobType,job_source:r.jobSource,job_description:r.jobDescription,address:r.address,city:r.city,state:r.state,zip_code:r.zipCode,area:r.area,start_date:r.startDate,start_time:r.startTime,end_time:r.endTime}})}),s=await d.json();d.ok?(alert("Job created successfully!"),o.reset()):(console.error("Error:",s),alert("Error creating job."))}catch(e){console.error("Error:",e),alert("Error creating job.")}});
//# sourceMappingURL=index.ef8c136c.js.map
